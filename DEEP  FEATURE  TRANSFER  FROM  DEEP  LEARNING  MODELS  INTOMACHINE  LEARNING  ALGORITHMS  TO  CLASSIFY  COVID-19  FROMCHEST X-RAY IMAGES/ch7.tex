%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{CONCLUSIONS AND RECOMMENDATIONS}\label{ch:CH7}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

The main scope of this thesis was to show a method to use image data without segmenting or manually extracting features from them on machine learning algorithms, and how to use it on a continuing global public health problem. One recommendation here can be given as to use data eliminated by professionals. In the studies like ours, getting support from specialist radiologists provides to have more qualified chest X-Ray images, and through this better classifiers may be yielded. 

The reason why applying cross validation on train data and yielding optimized hyper-parameters from these experiments is that to find the most generalized hyper-parameter settings. If the grid search was applied to the experiment including training on train data and testing on test data, the yielding parameters indeed would be only optimized for our test data. This would be enough for this work, if we only cared about the mathematical results and out success. However, we aimed to find more generalized optimal parameters. Thus, we used 10-Fold cross validation which means we experimented on 10 different validation sets. Then we tested these hyper-parameters on test data and reported the final results. In addition to that, we also experimented grid search only on the initially determined test set and reported the results. In this way, the comparison on metrics and optimized parameters can be performed between generalized and specific to our test data.

After the experiments, we encountered the benefits of obtaining parameters by using grid search on train set. We have seen that the parameters in this way are not always the best parameters for our test set. Thanks to this way, we provided the method for how to obtain results not specific to a group of data but more suitable for random grouped data.

Although this study mainly focused on chest X-Rays and image data, the one of aim was to show non-image data can be combined with image data. Our non-image data is the demographic information of patients for corresponding chest X-Rays. Since the data size was not enough for a good classification and the non-image data types was restricted to two features, desired result may not be seen. To see the results of the singular use of demographic information, we also experimented only on these two features with machine learning algorithms. We expect a visible effect of non-image data, if more information from patient such as doctors report, tobacco product use, associated genetic diseases, etc. is used. Moreover, the singular use results of non-image information would be better with more effective and numerically superior features.

Another main comparison was about the effect of regularization on machine learning algorithms. We wanted to see the performance of Lasso and Ridge, and obtained an improvement on linear discriminant analysis with Lasso.

The final best results are as follows:
\begin{itemize}
    \item \textbf{CNN:} the best result was obtained from ResNet-50 model after 9th train epoch in 7 minutes with the accuracy, sensitivity, specificity, precision, F1 score and AUC score of 92.16\%, 0.9216, 0.9215, 0.9216, 0.9216, 0.9215 respectively, and the loss of 9th train epoch and validation as 0.0223 and 1.3687, and
    \item \textbf{ML:} since the best model on CNN experiments was ResNet-50 model, the feature matrices of deep features providing the best results were also the ones transferred from ResNet-50 model. The results for three feature matrices $X_{info}$, $X_{cnn\_ResNet50}$ and $X_{all\_ResNet50}$ are as follows:
    \begin{itemize}
        \item the best result obtained from demographic information features was on KNN algorithm as the accuracy of 56.86\%, the sensitivity of 0.56863, the specificity of 0.58368 the precision of 0.6863, the F1 score of 0.49545, and the AUC score of 0.5745. The hyper-parameters were the number of neighbors as 17, the type of majority voting as uniform, the neighbor finder as brute force, and the metric function as euclidean,
        \item the best result obtained from deep transferred features was not singular. According the generalized hyper-parameters, SVM with Ridge regularizer, LR, LR with Ridge, and KNN algorithms had the same results with the accuracy, sensitivity, specificity, precision, F1 score and AUC score of 92.16\%, 0.9216, 0.9230, 0.9243, 0.9215, 0.9223 respectively, and
        \item the best result obtained from the combined features of demographic information and deep features was not singular. According the generalized hyper-parameters, SVM with Ridge regularizer, LR, LR with Ridge, and KNN algorithms had the same results with the accuracy, sensitivity, specificity, precision, F1 score and AUC score of 92.16\%, 0.9216, 0.9230, 0.9243, 0.9215, 0.9223 respectively.
    \end{itemize}
\end{itemize}

As it can be seen on confusion matrices of convolutional neural network results and machine learning results, the performance of classification for non-COVID labeled data was improved by machine learning algorithms. Moreover, the sensitivity, specificity, precision and F1 score was 0.9216, 0.9215, 0.9216 and 0.9216 respectively for ResNet-50 model, the result for machine learning algorithms was 0.9216, 0.9230, 0.9242, and 0.9216 for the sensitivity, specificity, precision and F1 score respectively. Briefly, even though the accuracy, sensitivity and F1 score did not improve, the specificity and precision improved. This can be interpreted as the answers of two questions could be given better: 1) how many of data estimated as infected were actually infected, and 2) how many of healthy data over all patients correctly predicted.

\section{Future Work}

The contribution of this thesis is to understand how to use deep features extracted from convolutional neural network models on machine learning algorithms, and how to combine the image data features with non-image data to use in machine learning algorithms. To research on this topic, a global health problem COVID-19 disease and chest X-Rays images data including demographic information were used. However, any other image classification problem can be studied for future work. If a dataset consisting of images also includes non-image information, this thesis can be used as a guide for corresponding classification problem.

For instance, this study can be applied on multi-class classification problem on various respiratory diseases by chest computed tomography images of patients together with the demographic, doctors report, tobacco product use, associated genetic diseases, and respiratory test information. We also recommend to get help from one or more specialist radiologists and chest disease specialists on eliminating the data, for the given study example.

This study can be improved by using more qualified dataset with more data in number, and extended by using chest computer tomography and more information of the patients in terms of variety. On the other hand, optimizers on convolutional neural networks such as Adagrad \cite{adagrad} and Padam \cite{padam}, and elastic net regularization method \cite{elasticnet_paper} on machine learning algorithms can be used to extend this study. Moreover, ensemble learning \cite{ensemble_learning} on convolutional neural network process and machine learning process separately can be used to extend the scope and results of this study. 


